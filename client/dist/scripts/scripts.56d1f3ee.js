"use strict";angular.module("clientApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","chartjs"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/stats",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("clientApp").controller("HeaderController",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]),angular.module("clientApp").controller("MainCtrl",["$scope","$http",function(a,b){a.longUrl="",a.custom="",a.btn="GO!",a.takeShort=function(){var c=b.post("/rest/go-shorty",{longUrl:a.longUrl,custom:a.custom});c.success(function(b){console.log("Inserted!"),a.rispostaJson=b,a.shortUrl="http://localhost:4567/"+a.rispostaJson.shortUrl,a.err=""}),c.error(function(b){a.rispostaJson=b||"request failed",a.err=a.rispostaJson.err,a.shortUrl=""})}}]),angular.module("clientApp").controller("AboutCtrl",["$scope","$http",function(a,b){function c(a){l=[];var b=document.createElement("canvas");b.width="200",b.height="200",b.setAttribute("id","bStats");var c=document.getElementById("browser-chart-container");c.removeChild(c.firstChild),c.appendChild(b);for(var d=document.getElementById("browser-desc-container");d.firstChild;)d.removeChild(d.firstChild);for(var i in a){var j={value:a[i],color:e[i],highlight:"#FF5A5E",label:i};l.push(j);var k=document.createElement("div");k.setAttribute("class","row");var m=document.createElement("span"),n=document.createTextNode(i);m.appendChild(n),m.setAttribute("class","label label-default"),m.setAttribute("style","background-color:"+e[i]),k.appendChild(m),d.appendChild(k)}f={segmentShowStroke:!1,animateScale:!0},g=document.getElementById("bStats").getContext("2d"),h=new Chart(g).Pie(l,f)}function d(a){m=[];var b=document.createElement("canvas");b.width="200",b.height="200",b.setAttribute("id","cStats");var c=document.getElementById("country-chart-container");c.removeChild(c.firstChild),c.appendChild(b);for(var d=document.getElementById("country-desc-container");d.firstChild;)d.removeChild(d.firstChild);for(var e in a){var f="#"+function o(a,b,c){return b[a.floor(a.random()*b.length)]+(c&&o(a,b,c-1))}(Math,"0123456789ABCDEF",4),g={value:a[e],color:f,highlight:"#FF5A5E",label:e};m.push(g);var h=document.createElement("div");h.setAttribute("class","row");var l=document.createElement("span"),n=document.createTextNode(e);l.appendChild(n),l.setAttribute("class","label"),l.setAttribute("style","background-color:"+f),h.appendChild(l),d.appendChild(h)}i={segmentShowStroke:!1,animateScale:!0},j=document.getElementById("cStats").getContext("2d"),k=new Chart(j).Pie(m,i)}a.shortUrl="",a.getStats=function(){var e=b.get("/rest/stats/"+a.shortUrl);e.success(function(b){console.log("lets stats!"),a.rispostaJson=b,c(b.browserStats),d(b.countryStats)}),e.error(function(b){a.rispostaJson=b||"request failed",a.err=a.rispostaJson.err,a.shortUrl=""})};var e={chrome:"#00933B",firefox:"#FF9800",safari:"#00BCD4",explorer:"#01579B",opera:"#BF360C"};this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var f,g,h,i,j,k,l=[],m=[]}]),angular.module("clientApp").run(["$templateCache",function(a){a.put("views/about.html",'<!--<div class="jumbotron">\n  <h2>Statistic</h2>\n  <p class="lead">\n        <br>\n	    Insert the short url<input type="text" value="here" ng-model="shortUrl"> mai friend</p>\n	    <p><a class="btn btn-lg btn-success" ng-click="getStats()">Go!<span class="glyphicon glyphicon-ok">\n	   </span></a></p>\n	   <div ng-show="rispostaJson">\n		   <p>short: {{rispostaJson.numClicks}}</p>\n	  </div>\n</div>--> <div class="jumbotron"> <p class="h2">Statistics</p> <p> <input type="text" ng-model="shortUrl" placeholder="InsertShortURL to get stats" class="form-control input-lg"> </p> <p> <a class="btn btn-lg btn-success" ng-click="getStats()">go <span class="glyphicon glyphicon-ok"></span> </a> </p> </div> <div class="well h2" ng-show="rispostaJson"> <p class="text-center"> number of clicks: <b> {{rispostaJson.numClicks}}</b> </p> </div> <!--\n	<div id="chart-container" ng-show="rispostaJson">\n		<canvas id="browserStats" width="400" height="200"></canvas>\n	</div>\n\n<div class="well" id="country-chart-container">\n</div>\n	--> <div class="well"> <div class="container-fluid" style="padding:10px"> <div class="row text-center"> <div class="col-md-4 col-md-offset-1" id="browser-chart-container" style="width:auto"> </div> <div class="col-md-4" id="browser-desc-container" style="width:auto"> </div> <div class="col-md-4" id="country-chart-container" style="width:auto"> </div> <div class="col-md-4" id="country-desc-container" style="width:auto"> </div> </div> </div> </div>'),a.put("views/main.html",'<!--<div class="row marketing">\n  <h1>Welcome to Go-shorty!</h1>\n            <form>\n            <p class="lead">Insert long url:<input type="text" ng-model="longUrl"></p>\n            <p>Insert custom url:<input type="text" ng-model="custom"></p> \n            <input type="button" value="GO!" ng-click="takeShort()">\n            </form>\n            <div ng-show="rispostaJson"><p>short: {{rispostaJson}}</p></div>\n</div>\n--> <p align="center"><img src="images/logo.0249c5d7.png" class="img-responsive"></p> <div class="jumbotron"> <form role="form"> <div class="row marketing"> <div class="form-group"> <!--<p><h2>Welcome to Go-shorty!</h><br></p>--> <p> <input type="text" ng-model="longUrl" placeholder="Insert a long URL" class="form-control input-lg"> </p> <p> <input type="text" ng-model="custom" placeholder="Add custom text" class="form-control input-lg"> </p> <p> <a class="btn btn-lg btn-success" ng-href="#/" ng-click="takeShort()">go <span class="glyphicon glyphicon-ok"></span> </a> </p> <p> <div ng-show="shortUrl" class="alert alert-success">{{shortUrl}}</div> </p> <p> <div ng-show="err" class="alert alert-danger">{{err}}</div> </p> </div> </div> </form> </div>')}]);